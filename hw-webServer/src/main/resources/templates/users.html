<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Пользователи</title>
    <script>
        function getUserById() {
            const userIdTextBox = document.getElementById('userIdTextBox');
            const userDataContainer = document.getElementById('userDataContainer');
            const id = userIdTextBox.value;
            //fetch('api/user?id=' + id)
            fetch('api/user/' + id)
                .then(response => response.json())
                .then(user => userDataContainer.innerHTML = JSON.stringify(user, null, 4));
        }


        function getAllClients() {
            fetch('api/user')
                .then(response => response.json())
                .then(users => {
                    const table = document.getElementById("clients");
                    Array.from(table.rows).slice(1).forEach(row => {
                        table.deleteRow(row.rowIndex);
                    })

                    users.forEach(user => {
                        const row = document.createElement("tr");
                        const id = document.createElement("td");
                        const name = document.createElement("td");
                        // const address = document.createElement("td");
                        // const phone = document.createElement("td");
                        id.innerHTML = user.id;
                        name.innerHTML = user.name;

                        row.appendChild(id);
                        row.appendChild(name);
                        table.appendChild(row);
                    })
                });
        }

    </script>
</head>

<body>
<h4>Получить пользователя по id</h4>
<input type="text" id = "userIdTextBox" value="3" placeholder="Введите id пользователя">
<button onclick="getUserById()">Получить</button>
<pre id = "userDataContainer"></pre>

<h4>Получить список всех клиентов</h4>

<button onclick="getAllClients()">Получить</button>
<table id="clients">
    <tr id="titleRow">
        <th><b>id</b></th>
        <th><b>name</b></th>
    </tr>
</table>
</body>
</html>
